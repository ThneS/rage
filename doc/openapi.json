{"openapi":"3.1.0","info":{"title":"RAG Parameter Tuning System","version":"0.1.0"},"paths":{"/api/v1/documents/upload":{"post":{"tags":["documents"],"summary":"Upload Document","description":"处理文档上传请求\n\n接受文件和元数据，返回创建的文档对象。\n支持的文件类型：PDF、Word、Excel、CSV、图片等。\n\nArgs:\n    file: 要上传的文件\n    metadata: 文档元数据，可选，JSON格式字符串\n    db: 数据库会话\n\nReturns:\n    Document: 创建的文档对象\n\nRaises:\n    HTTPException:\n        - 400: 文件类型不支持\n        - 422: 请求数据格式错误\n        - 500: 服务器内部错误","operationId":"upload_document_api_v1_documents_upload_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_document_api_v1_documents_upload_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Document"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/documents/{document_id}/parse":{"post":{"tags":["documents"],"summary":"Process Document","description":"处理文档（解析和分块）","operationId":"process_document_api_v1_documents__document_id__parse_post","parameters":[{"name":"document_id","in":"path","required":true,"schema":{"type":"integer","title":"Document Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DocumentLoadConfig"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Document"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/documents/":{"get":{"tags":["documents"],"summary":"Get Documents","description":"获取文档列表","operationId":"get_documents_api_v1_documents__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/Document"},"type":"array","title":"Response Get Documents Api V1 Documents  Get"}}}}}}},"/api/v1/documents/{document_id}/load-config":{"get":{"tags":["documents"],"summary":"Get Load Config","description":"获取文档加载配置\n\n根据文档的文件类型返回对应的加载配置，包括：\n- 文件类型名称和描述\n- 配置字段定义（包括字段类型、默认值、验证规则等）\n- 默认配置值\n\nArgs:\n    document_id: 文档ID\n    db: 数据库会话\n\nReturns:\n    FileTypeConfigResponse: 文件类型配置信息\n\nRaises:\n    HTTPException:\n        - 404: 文档不存在\n        - 400: 文件类型不支持\n        - 500: 服务器内部错误","operationId":"get_load_config_api_v1_documents__document_id__load_config_get","parameters":[{"name":"document_id","in":"path","required":true,"schema":{"type":"integer","title":"Document Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FileTypeConfigResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"summary":"Root","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"Body_upload_document_api_v1_documents_upload_post":{"properties":{"file":{"type":"string","format":"binary","title":"File","description":"要上传的文件"},"metadata":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Metadata","description":"文档元数据，JSON格式字符串"}},"type":"object","required":["file"],"title":"Body_upload_document_api_v1_documents_upload_post"},"ConfigField":{"properties":{"name":{"type":"string","title":"Name","description":"字段名称"},"label":{"type":"string","title":"Label","description":"字段标签"},"type":{"type":"string","enum":["switch","select","radio","number","text","textarea","range"],"title":"Type","description":"字段类型"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"字段描述"},"default":{"title":"Default","description":"默认值"},"required":{"type":"boolean","title":"Required","description":"是否必填","default":false},"options":{"anyOf":[{"items":{"$ref":"#/components/schemas/ConfigFieldOption"},"type":"array"},{"type":"null"}],"title":"Options","description":"选项列表（用于select和radio类型）"},"min":{"anyOf":[{"type":"integer"},{"type":"number"},{"type":"null"}],"title":"Min","description":"最小值（用于number和range类型）"},"max":{"anyOf":[{"type":"integer"},{"type":"number"},{"type":"null"}],"title":"Max","description":"最大值（用于number和range类型）"},"step":{"anyOf":[{"type":"integer"},{"type":"number"},{"type":"null"}],"title":"Step","description":"步长（用于number和range类型）"},"placeholder":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Placeholder","description":"占位文本（用于text和textarea类型）"},"rows":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Rows","description":"行数（用于textarea类型）"},"disabled":{"type":"boolean","title":"Disabled","description":"是否禁用","default":false},"hidden":{"type":"boolean","title":"Hidden","description":"是否隐藏","default":false},"group":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Group","description":"分组名称"},"dependencies":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Dependencies","description":"依赖关系，例如：{'field': 'extract_text', 'value': True}"}},"type":"object","required":["name","label","type","default"],"title":"ConfigField","description":"配置字段定义"},"ConfigFieldOption":{"properties":{"label":{"type":"string","title":"Label","description":"选项标签"},"value":{"title":"Value","description":"选项值"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"选项描述"}},"type":"object","required":["label","value"],"title":"ConfigFieldOption","description":"配置选项"},"Document":{"properties":{"filename":{"type":"string","title":"Filename","description":"文件名"},"file_type":{"type":"string","title":"File Type","description":"文件类型（扩展名）"},"file_size":{"type":"integer","title":"File Size","description":"文件大小（字节）"},"doc_metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Doc Metadata","description":"文档元数据，可包含标题、作者、创建时间等信息"},"id":{"type":"integer","title":"Id"},"file_path":{"type":"string","title":"File Path"},"status":{"$ref":"#/components/schemas/DocumentStatus","description":"文档处理状态","default":"pending"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"processed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Processed At"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message"}},"type":"object","required":["filename","file_type","file_size","id","file_path","created_at","updated_at"],"title":"Document","description":"文档完整模型"},"DocumentLoadConfig":{"properties":{"extract_text":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Extract Text","description":"是否提取文本","default":true},"extract_images":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Extract Images","description":"是否提取图片","default":false},"extract_tables":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Extract Tables","description":"是否提取表格","default":true},"ocr_enabled":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Ocr Enabled","description":"是否启用OCR","default":false},"page_range":{"anyOf":[{"type":"string"},{"items":{"type":"integer"},"type":"array"},{"type":"null"}],"title":"Page Range","description":"页码范围","default":"all"},"password":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Password","description":"PDF密码"},"extract_headers":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Extract Headers","description":"是否提取页眉","default":true},"extract_footers":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Extract Footers","description":"是否提取页脚","default":true},"extract_comments":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Extract Comments","description":"是否提取批注","default":false},"extract_sheets":{"anyOf":[{"type":"string"},{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Extract Sheets","description":"要提取的工作表","default":"all"},"extract_formulas":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Extract Formulas","description":"是否提取公式","default":false},"extract_charts":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Extract Charts","description":"是否提取图表","default":false},"header_row":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Header Row","description":"表头行号","default":0},"skip_empty_rows":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Skip Empty Rows","description":"是否跳过空行","default":true},"delimiter":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Delimiter","description":"分隔符","default":","},"encoding":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Encoding","description":"文件编码","default":"utf-8"},"has_header":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Has Header","description":"是否有表头","default":true},"ocr_language":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ocr Language","description":"OCR语言","default":"chi_sim+eng"},"extract_metadata":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Extract Metadata","description":"是否提取元数据","default":true},"resize":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Resize","description":"是否调整大小","default":false},"max_size":{"anyOf":[{"prefixItems":[{"type":"integer"},{"type":"integer"}],"type":"array","maxItems":2,"minItems":2},{"type":"null"}],"title":"Max Size","description":"最大尺寸(宽,高)"}},"type":"object","title":"DocumentLoadConfig","description":"文档加载配置基类"},"DocumentStatus":{"type":"string","enum":["pending","processing","completed","failed"],"title":"DocumentStatus","description":"文档状态枚举"},"FileTypeConfigResponse":{"properties":{"name":{"type":"string","title":"Name","description":"文件类型名称"},"description":{"type":"string","title":"Description","description":"文件类型描述"},"icon":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Icon","description":"文件类型图标"},"fields":{"items":{"$ref":"#/components/schemas/ConfigField"},"type":"array","title":"Fields","description":"配置字段列表"},"default_config":{"additionalProperties":true,"type":"object","title":"Default Config","description":"默认配置值"}},"type":"object","required":["name","description","fields","default_config"],"title":"FileTypeConfigResponse","description":"文件类型配置响应"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}